# Week 2: Security Planning and Testing Methodology

## 1. Introduction
Phase​‍​‌‍​‍‌ 2 is mainly about creating a security baseline and outlining a uniform approach for performance analysis. Such planning stages confirm that the implementation and testing stages are not only orderly but also systematic. The objective is to fortify the headless server against typical network attacks and, at the same time, put in place a monitoring system to quantify the security overhead vs. system performance..

## 2. Threat Model
In order to secure the system in the best possible way, I came up with three different kinds of threats that could be the source of trouble for a networked Linux server. This model is organizing the risks around the **Dual-System** architecture where **SSH** is considered the main attack ​‍​‌‍​‍‌surface..

| Threat ID | Threat Description | Potential Impact | Mitigation Strategy |
| :--- | :--- | :--- | :--- |
| **T1** | **SSH Brute Force Attacks** | By​‍​‌‍​‍‌ far, the most significant risk is a password guessing attack trying to obtain shell access. These are usually brute force plays on the user accounts of the SSH service which is the only entry point to the machine. | **Primary:** Disable password authentication (Keys only). <br> **Secondary:** Configure `Fail2Ban` to block IPs with repeated failed login attempts. |
| **T2** | **Privilege Escalation** | The attacke are likely to try to get admin rights on you if they find a way to get some kind of limited access to the machine.. | **Primary:** Create a non-root administrative user with restricted `sudo` access. <br> **Secondary:** Enforce AppArmor profiles to restrict service capabilities. |
| **T3** | **Unpatched Vulnerabilities** | With the intention to take advantage of the security vulnerabilities that are present in old software packages, e.g., deprecated OpenSSL versions, someone might go down that ​‍​‌‍​‍‌route. | **Primary:** Configure `unattended-upgrades` for automatic security patching. <br> **Secondary:** Perform regular vulnerability scanning with **Lynis**. |

## 3. Security Configuration Checklist
This checklist defines the "Security Baseline" for the server. These controls cover SSH hardening, firewalling, access control, and maintenance.

### A. Network Security & Firewall
-  **Firewall Tool:** UFW (Uncomplicated Firewall).
-  **Default Policy:** Deny all incoming traffic.
-  **Allow Rule:** Allow SSH (Port 22) **ONLY** from the Workstation IP.
-  **Verification:** `sudo ufw status verbose` must show "Default: deny (incoming)".
<img width="474" height="76" alt="image" src="https://github.com/user-attachments/assets/5380f310-2c71-4f46-b2fd-6f22936c2c24" />

### B. SSH Hardening (`/etc/ssh/sshd_config`)
-  Disable Root Login (`PermitRootLogin no`).
-  Disable Password Authentication (`PasswordAuthentication no`).
-  Enforce Public Key Authentication (`PubkeyAuthentication yes`).
-  Restrict SSH access to specific users (`AllowUsers`).
<img width="1016" height="140" alt="image" src="https://github.com/user-attachments/assets/3bbd87dd-6c9c-4006-9340-40f15f37528e" />

### C. Access Control & User Management
-  Create a non-root administrative user.
-  Lock the `root` account password (`sudo passwd -l root`).
- **Mandatory Access Control:** Verify AppArmor is active (`aa-status`).
<img width="1005" height="327" alt="image" src="https://github.com/user-attachments/assets/1910523f-5914-4a2b-814a-e537b17dbad9" />

### D. System Maintenance
-  Install `unattended-upgrades` package.
-  Configure automatic security updates.
<img width="1253" height="878" alt="image" src="https://github.com/user-attachments/assets/8dd09f12-edd3-45de-bce0-128c097fa6d7" />

## 4. Performance Testing Plan
To evaluate the **Limitations and Trade-offs** of the operating system, I will measure system behavior under different workloads. All monitoring will be performed remotely from the workstation to adhere to the headless constraint.

### A. Remote Monitoring Methodology
Since the server has no GUI, I cannot use local task managers. I will use a custom script `monitor-server.sh` running on the Workstation that connects via SSH to collect data.

**Key Metrics to Monitor:**
1.  **CPU Usage:** User time vs. System time (identifying processing bottlenecks).
2.  **Memory Usage:** Available RAM vs. Buffers/Cache (identifying memory pressure).
3.  **Disk I/O:** Read/Write wait times (identifying storage limitations).
4.  **Network Latency:** Round-trip time between Workstation and Server.

### B. Testing Scenarios
I will compare performance across three states:
1.  **Baseline:** System idle with only SSH and background services running.
2.  **Load:** High stress generated by specific applications to be selected in Week 3.
3.  **Optimized:** Performance after tuning kernel parameters or disabling unnecessary services.

## 5. Learning Reflection

Phase​‍​‌‍​‍‌ 2 was my first experience operating as a "Security Architect" instead of merely a "System Administrator." The change of view made me see a lot of the important trade-offs that are involved in designing a secure system.

**1. The Trade-off between Usability and Security:**

When I was tasked with setting up the firewall ruleset, I had to deal with the age-old problem where the needs of the user clash with those of security. In my decision to implement a **Default Deny** policy, I have enhanced security to the maximum level but at the same time, I have created a rather significant administrative risk: if the IP address of the Workstation changes, I will no longer have access to the server. This made me understand that configurations that are secure entail management processes that are more strict and complex.

**2. Proactive vs. Reactive Security:**

Preparing the Threat Model prior to the actual work at the terminal was a very good move. It made me realize that **SSH Brute Force **should be the first thing to come to mind when considering a risk *before* deployment. The main point of doing so is to make sure that the different controls put in place later, such as the one that disables password authentication, are not only a set of "best practices" picked at random but are actually targeted solutions to the risks that have been identified.

**3. The Constraints of Headless Administration:**

While devising the monitoring strategy, the limitations of a **headless** system became very apparent to me. I found that I cannot turn to visual instruments like 'System Monitor' or local GUI dashboards. Therefore, it was necessary to create a remote script `monitor-server.sh` through which data could be accessed via **SSH**, thereby emphasizing the indispensable skill of the command-line in professional cloud ​‍​‌‍​‍‌environments.

---
[< Previous: Week 1](week1.md) | [Return to Home](index.md) | [Next: Week 3 >](week3.md)
