# Week 2: Security Planning and Testing Methodology

## 1. Introduction
Phase 2 focuses on designing a security baseline and defining a consistent methodology for performance analysis. This planning ensures that the implementation phase (Week 4) and testing phase (Week 6) are conducted systematically. The goal is to secure the headless server against common network threats while establishing an observability framework to measure the trade-offs between security overhead and system performance.

## 2. Threat Model
To secure the system effectively, I have identified three specific threats relevant to a networked Linux server. [cite_start]This model prioritizes risks based on the "Dual-System" architecture where SSH is the primary attack surface.

| Threat ID | Threat Description | Potential Impact | Mitigation Strategy |
| :--- | :--- | :--- | :--- |
| **T1** | **SSH Brute Force Attacks** | Attackers attempt to guess passwords to gain shell access. Since SSH is the only entry point, this is the highest risk. | **Primary:** Disable password authentication (Keys only). <br> **Secondary:** Configure `Fail2Ban` to block IPs with repeated failed login attempts. |
| **T2** | **Privilege Escalation** | An attacker with low-level access attempts to acquire root permissions to compromise the entire OS. | **Primary:** Create a non-root administrative user with restricted `sudo` access. <br> **Secondary:** Enforce AppArmor profiles to restrict service capabilities. |
| **T3** | **Unpatched Vulnerabilities** | Exploitation of known security flaws in outdated software packages, e.g., old OpenSSL versions. | **Primary:** Configure `unattended-upgrades` for automatic security patching. <br> **Secondary:** Perform regular vulnerability scanning with **Lynis**. |

## 3. Security Configuration Checklist
This checklist defines the "Security Baseline" for the server. These controls cover SSH hardening, firewalling, access control, and maintenance.

### A. Network Security & Firewall
-  **Firewall Tool:** UFW (Uncomplicated Firewall).
-  **Default Policy:** Deny all incoming traffic.
-  **Allow Rule:** Allow SSH (Port 22) **ONLY** from the Workstation IP.
-  **Verification:** `sudo ufw status verbose` must show "Default: deny (incoming)".
<img width="474" height="76" alt="image" src="https://github.com/user-attachments/assets/5380f310-2c71-4f46-b2fd-6f22936c2c24" />

### B. SSH Hardening (`/etc/ssh/sshd_config`)
-  Disable Root Login (`PermitRootLogin no`).
-  Disable Password Authentication (`PasswordAuthentication no`).
-  Enforce Public Key Authentication (`PubkeyAuthentication yes`).
-  Restrict SSH access to specific users (`AllowUsers`).
<img width="1016" height="140" alt="image" src="https://github.com/user-attachments/assets/3bbd87dd-6c9c-4006-9340-40f15f37528e" />

### C. Access Control & User Management
-  Create a non-root administrative user.
-  Lock the `root` account password (`sudo passwd -l root`).
- **Mandatory Access Control:** Verify AppArmor is active (`aa-status`).
- <img width="1005" height="327" alt="image" src="https://github.com/user-attachments/assets/1910523f-5914-4a2b-814a-e537b17dbad9" />

### D. System Maintenance
-  Install `unattended-upgrades` package.
-  Configure automatic security updates.
<img width="1253" height="878" alt="image" src="https://github.com/user-attachments/assets/8dd09f12-edd3-45de-bce0-128c097fa6d7" />

## 4. Performance Testing Plan
To evaluate the **Limitations and Trade-offs** of the operating system, I will measure system behavior under different workloads. All monitoring will be performed remotely from the workstation to adhere to the headless constraint.

### A. Remote Monitoring Methodology
Since the server has no GUI, I cannot use local task managers. I will use a custom script `monitor-server.sh` running on the Workstation that connects via SSH to collect data.

**Key Metrics to Monitor:**
1.  **CPU Usage:** User time vs. System time (identifying processing bottlenecks).
2.  **Memory Usage:** Available RAM vs. Buffers/Cache (identifying memory pressure).
3.  **Disk I/O:** Read/Write wait times (identifying storage limitations).
4.  **Network Latency:** Round-trip time between Workstation and Server.

### B. Testing Scenarios
I will compare performance across three states:
1.  **Baseline:** System idle with only SSH and background services running.
2.  **Load:** High stress generated by specific applications to be selected in Week 3.
3.  **Optimized:** Performance after tuning kernel parameters or disabling unnecessary services.

---
[< Previous: Week 1](week1.md) | [Return to Home](index.md) | [Next: Week 3 >](week3.md)
